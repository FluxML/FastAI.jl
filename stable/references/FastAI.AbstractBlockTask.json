{"attributes":{"kind":"abstract type","backlinks":[{"tag":"sourcefile","title":"FastAI/src/datablock/task.jl","docid":"sourcefiles/FastAI/src/datablock/task.jl"},{"tag":"sourcefile","title":"FastAI/src/interpretation/learner.jl","docid":"sourcefiles/FastAI/src/interpretation/learner.jl"},{"tag":"documentation","title":"SupervisedTask","docid":"references/FastAI.SupervisedTask"},{"tag":"documentation","title":"BlockTask","docid":"references/FastAI.BlockTask"},{"tag":"sourcefile","title":"FastAI/src/interpretation/task.jl","docid":"sourcefiles/FastAI/src/interpretation/task.jl"},{"tag":"document","title":"Variational autoencoders","docid":"documents/notebooks/vae.ipynb"},{"tag":"documentation","title":"LearningTask","docid":"references/FastAI.LearningTask"}],"methods":[],"name":"AbstractBlockTask","title":"AbstractBlockTask","symbol_id":"FastAI.AbstractBlockTask","public":false,"module_id":"FastAI"},"tag":"documentation","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["abstract type AbstractBlockTask <: LearningTask\n"],"type":"node"},{"attributes":{},"tag":"p","children":["Abstract supertype for learning tasks that derive their functionality from ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.Block"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["Block"],"type":"node"}],"type":"node"},"s and ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.Encoding"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["Encoding"],"type":"node"}],"type":"node"},"s."],"type":"node"},{"attributes":{},"tag":"p","children":["These learning tasks require you only to specify blocks and encodings by defining which blocks of data show up at which stage of the pipeline. Generally, a subtype will have a field ",{"attributes":{},"tag":"code","children":["blocks"],"type":"node"}," of type ",{"attributes":{},"tag":"code","children":["NamedTuple"],"type":"node"}," that contains this information and a field ",{"attributes":{},"tag":"code","children":["encodings"],"type":"node"}," of encodings that are applied to samples. They can be accessed with ",{"attributes":{},"tag":"code","children":["getblocks"],"type":"node"}," and ",{"attributes":{},"tag":"code","children":["getencodings"],"type":"node"}," respectively. For example, ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.SupervisedTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["SupervisedTask"],"type":"node"}],"type":"node"}," represents a learning task where each sample consists of an input and a target."],"type":"node"},{"attributes":{},"tag":"codecell","children":[{"attributes":{"cell":"main","lang":"julia"},"tag":"codeinput","children":[{"attributes":{"cell":"main","lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"USING","children":[{"attributes":{},"tag":"USING","children":["using"],"type":"node"},{"attributes":{},"tag":"DOT","children":[{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"references/FastAI"},"tag":"reference","children":["FastAI"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"EQ","children":[{"attributes":{},"tag":"IDENTIFIER","children":["task"],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"EQ","children":["="],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.SupervisedTask"},"tag":"reference","children":["SupervisedTask"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n    "],"type":"node"},{"attributes":{},"tag":"TUPLE","children":[{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"CURLY","children":[{"attributes":{"reftype":"symbol","document_id":"references/DataAugmentation.Image"},"tag":"reference","children":["Image"],"type":"node"},{"attributes":{},"tag":"LBRACE","children":["{"],"type":"node"},{"attributes":{},"tag":"INTEGER","children":["2"],"type":"node"},{"attributes":{},"tag":"RBRACE","children":["}"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.Label"},"tag":"reference","children":["Label"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"VECT","children":[{"attributes":{},"tag":"LSQUARE","children":["["],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["cat"],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"STRING","children":["dog"],"type":"node"},{"attributes":{},"tag":"DQUOTE","children":["\""],"type":"node"},{"attributes":{},"tag":"RSQUARE","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n    "],"type":"node"},{"attributes":{},"tag":"TUPLE","children":[{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.Vision.ImagePreprocessing"},"tag":"reference","children":["ImagePreprocessing"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"WHITESPACE","children":[" "],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{"reftype":"symbol","document_id":"references/DataAugmentation.OneHot"},"tag":"reference","children":["OneHot"],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"COMMA","children":[","],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NEWLINE_WS","children":["\n"],"type":"node"},{"attributes":{},"tag":"CALL","children":[{"attributes":{},"tag":"DOT","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI"},"tag":"reference","children":["FastAI"],"type":"node"},{"attributes":{},"tag":"DOT","children":["."],"type":"node"},{"attributes":{},"tag":"QUOTE","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.getblocks"},"tag":"reference","children":["getblocks"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"LPAREN","children":["("],"type":"node"},{"attributes":{},"tag":"IDENTIFIER","children":["task"],"type":"node"},{"attributes":{},"tag":"RPAREN","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"coderesult","children":[{"attributes":{},"tag":"codeblock","children":[{"mimes":{"text/html":"(input = Image{2}(), target = Label{String}([&quot;cat&quot;, &quot;dog&quot;]), sample = (Image{2}(), Label{String}([&quot;cat&quot;, &quot;dog&quot;])), encodedsample = (FastAI.Vision.ImageTensor{2}(3), FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;])), x = FastAI.Vision.ImageTensor{2}(3), y = FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;]), ŷ = FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;]), pred = Label{String}([&quot;cat&quot;, &quot;dog&quot;]))"},"type":"leaf"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["To implement a new ",{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"}," either"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":["use the helper ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.BlockTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["BlockTask"],"type":"node"}],"type":"node"}," (simpler)"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":["or subtype ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.AbstractBlockTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"}],"type":"node"}," (allows customization through dispatch)"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"h2","children":["Blocks and interfaces"],"type":"node"},{"attributes":{},"tag":"p","children":["To support different learning task interfaces, a ",{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"},"'s blocks need to contain different blocks. Below we list first block names with descriptions, and afterwards relevant interface functions and which blocks are required to use them."],"type":"node"},{"attributes":{},"tag":"h3","children":["Blocks"],"type":"node"},{"attributes":{},"tag":"p","children":["Each name corresponds to a key of the named tuple ",{"attributes":{},"tag":"code","children":["blocks = getblocks(task)"],"type":"node"},"). A block is referred to with ",{"attributes":{},"tag":"code","children":["blocks.$name"],"type":"node"}," and an instance of data from a block is referred to as ",{"attributes":{},"tag":"code","children":["$name"],"type":"node"},"."],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.sample"],"type":"node"},": The most important block, representing one full observation of unprocessed data. Data containers used with a learning task should have compatible observations, i.e. ",{"attributes":{},"tag":"code","children":["checkblock(blocks.sample, getobs(data, i))"],"type":"node"},"."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.x"],"type":"node"},": Data that will be fed into the model, i.e. (neglecting batching) ",{"attributes":{},"tag":"code","children":["model(x)"],"type":"node"}," should work"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.ŷ"],"type":"node"},": Data that is output by the model, i.e. (neglecting batching) ",{"attributes":{},"tag":"code","children":["checkblock(blocks.ŷ, model(x))"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.y"],"type":"node"},": Data that is compared to the model output using a loss function, i.e. ",{"attributes":{},"tag":"code","children":["lossfn(ŷ, y)"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.encodedsample"],"type":"node"},": An encoded version of ",{"attributes":{},"tag":"code","children":["blocks.sample"],"type":"node"},". Will usually correspond to ",{"attributes":{},"tag":"code","children":["encodedblockfilled(getencodings(task), blocks.sample)"],"type":"node"},"."],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"h3","children":["Interfaces/functionality and required blocks:"],"type":"node"},{"attributes":{},"tag":"p","children":["Core:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.encode"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["encode"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, sample)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"},". Also enables use of ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.taskdataset"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskdataset"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.taskdataloaders"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskdataloaders"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.decode"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decode"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, encodedsample)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.decodeypred"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decodeypred"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, ŷ)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.decodey"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decodey"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, y)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["y"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Training:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.taskmodel"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskmodel"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["x"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.tasklossfn"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["tasklossfn"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["y"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Visualization:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsamples"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showencodedsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showencodedsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showencodedsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showencodedsamples"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showbatch"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showbatch"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsamples"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showoutput"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutput"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showoutputs"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutputs"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","document_id":"references/FastAI.showoutputbatch"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutputbatch"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Testing:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.mockmodel"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["mockmodel"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["x"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","document_id":"references/FastAI.mocksample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["mocksample"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}
<HTML><head><title>How to log to TensorBoard</title><script src=../../template/highlight.min.js ></script><script src=../../template/julia.min.js ></script><script src=../../template/loadhighlightjs.js ></script><link href=../../template/ansi.css rel=stylesheet ></link><link href=../../template/hugobook.css rel=stylesheet ></link><meta content=Type=text/html; charset=utf-8 http-equiv=Content-Type ></meta><meta name=viewport content=width=device-width, initial-scale=1 ></meta></head><body><input onclick=toggleMenu() id=menu-control class=hidden toggle type=checkbox ></input><input id=toc-control type=checkbox class=hidden toggle ></input><main class=container flex ><aside id=menu-container class=book-menu ><nav class=book-menu-content ><h2 id=title >FastAI.jl</h2><div id=sidebar ><div class=doctree ><body><ul><li><p><a href=../../README.md.html title= >README</a></p></li><li><p><a href=../setup.md.html title= >Setup</a></p></li><li><p><a href=../../notebooks/quickstart.ipynb.html title= >Quickstart</a></p></li><li><p>Tutorials</p><ul><li><p>Beginner</p><ul><li><p><a href=../introduction.md.html title= >Introduction</a></p></li><li><p><a href=../discovery.md.html title= >Discovery</a></p></li></ul></li><li><p>Intermediate</p><ul><li><p><a href=../../notebooks/imagesegmentation.ipynb.html title= >Image segmentation</a></p></li><li><p><a href=../../notebooks/keypointregression.ipynb.html title= >Keypoint regression</a></p></li><li><p><a href=../../notebooks/tabularclassification.ipynb.html title= >Tabular classification</a></p></li><li><p><a href=../data_containers.md.html title= >Data containers</a></p></li><li><p><a href=../../notebooks/serialization.ipynb.html title= >Saving and loading models</a></p></li></ul></li><li><p>Advanced</p><ul><li><p><a href=../../notebooks/presizing.ipynb.html title= >Presizing vision datasets</a></p></li><li><p><a href=../../notebooks/vae.ipynb.html title= >Unsupervised learning</a></p></li><li><p><a href=../learning_methods.md.html title= >Custom Learning methods</a></p></li></ul></li></ul></li><li><p>How To</p><ul><li><p><a href=../../notebooks/training.ipynb.html title= >Train your model</a></p></li><li><p><a href=augmentvision.md.html title= >Augment vision data</a></p></li><li><p><a href=logtensorboard.md.html title= >Log to TensorBoard</a></p></li></ul></li><li><p>Reference</p><ul><li><p><a href=../../REFERENCE.html title= >Docstrings</a></p></li><li><p><a href=../fastai_api_comparison.md.html title= >fastai API comparison</a></p></li><li><p><a href=../interfaces.md.html title= >Extension APIs</a></p></li><li><p><a href=../glossary.md.html title= >Glossary</a></p></li></ul></li><li><p>Background</p><ul><li><p><a href=../background/blocksencodings.md.html title= >Blocks and encodings</a></p></li><li><p><a href=../background/datapipelines.md.html title= >Performant data pipelines</a></p></li></ul></li></ul></body></div></div></nav></aside><div class=book-page ><header class=book-header ></header><article><h1 id=how-to-log-to-tensorboard >How to log to TensorBoard</h1><p>TensorBoard is a format and viewer for logs of model training and can be used to inspect and compare the results of training runs. We can log step and epoch metrics, hyperparameters and even visualizations to TensorBoard using FluxTraining.jlâ€™s logging callbacks.</p><h2 id=generating-logs >Generating logs</h2><p>To use logging callbacks, we need to pass a log backend, here <a href=../../REFERENCE/FluxTraining.TensorBoardBackend.html ><code>TensorBoardBackend</code></a>. This design allows flexibly supporting other logging backends like Weights and Biases or neptune.ai in the future.</p><div class=cellcontainer cell=main lang=julia ><pre class=codecell cell=main lang=julia ><code>using FastAI

dir = mktempdir()
backend = TensorBoardBackend(dir)
</code></pre><pre class=coderesult ><code>TensorBoardBackend(/tmp/jl_xnTkeH)</code></pre></div><p>Then we create callbacks for logging metrics and hyperparameters to that backend:</p><div class=cellcontainer cell=main lang=julia ><pre class=codecell cell=main lang=julia ><code>metricscb = LogMetrics(backend)
hparamscb = LogHyperParams(backend)
</code></pre><pre class=coderesult ><code>LogHyperParams((TensorBoardBackend(/tmp/jl_xnTkeH),))</code></pre></div><p>Like any other callbacks, these can then be passed to a <code>Learner</code> along with other callbacks and we can start training. By using the <a href=../../REFERENCE/FluxTraining.Metrics.html ><code>Metrics</code></a> callback we can log metrics other than the loss.</p><pre lang=julia ><code>
callbacks = [
    metricscb,
    hparamscb,
    ToGPU(),
    Metrics(accuracy)
]

data = ...
method = ...
learner = methodlearner(method, data; callbacks=callbacks)
fitonecycle!(learner, 5)
</code></pre><h2 id=inspecting-logs >Inspecting logs</h2><p>To inspect the logs you will have to install the <code>tensorboard</code> command-line using <code>pip</code> (you can access the command-line in the Julia REPL by pressing <code>;</code>).</p><pre lang= ><code>shell&gt; pip install tensorboard
</code></pre><p>After this one-time installation, you can run it by pointing it to the log directory created above:</p><pre lang= ><code>shell&gt; tensorboard --logdir $dir
</code></pre><p>This should give you an URL that you can open in a browser which should look like this:</p><p><img src=../../assets/tensorboardscreenshot.png alt= ></img></p><p>Note that you can also open TensorBoard and it will update as the training progresses.</p></article><footer class=book-footer ></footer></div><aside class=book-toc ><nav id=toc class=book-toc-content ><ul><li><a href=#how-to-log-to-tensorboard >How to log to TensorBoard</a><ul><li><a href=#generating-logs >Generating logs</a><ul></ul></li><li><a href=#inspecting-logs >Inspecting logs</a><ul></ul></li></ul></li></ul></nav></aside></main></body></HTML>
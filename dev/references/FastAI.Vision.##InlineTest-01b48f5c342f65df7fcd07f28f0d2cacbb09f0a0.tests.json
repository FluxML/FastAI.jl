{"attributes":{"kind":"const","backlinks":[],"name":"tests","title":"tests","symbol_id":"FastAI.Vision.##InlineTest-01b48f5c342f65df7fcd07f28f0d2cacbb09f0a0.tests","public":false,"module_id":"FastAI.Vision.##InlineTest-01b48f5c342f65df7fcd07f28f0d2cacbb09f0a0"},"tag":"documentation","children":[{"attributes":{},"tag":"codecell","children":[{"attributes":{"lang":"julia"},"tag":"codeinput","children":[{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":["FastAI.Vision.##InlineTest-01b48f5c342f65df7fcd07f28f0d2cacbb09f0a0.tests"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"coderesult","children":[{"attributes":{},"tag":"codeblock","children":[{"mimes":{"text/html":"(tests = Any[], news = Any[(ts = (&quot;checksize&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:16 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:16 =#</span> @test checksize((10, 1), (10, 1))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:17 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:17 =#</span> @test !(checksize((100, 1), (10, 1)))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:18 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:18 =#</span> @test checksize((:, :, :), (1, 2, 3))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:19 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:19 =#</span> @test !(checksize((:, :, :), (1, 2)))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:20 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:20 =#</span> @test checksize((10, :, 1), (10, 20, 1))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:21 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:21 =#</span> @test !(checksize((10, :, 2), (10, 20, 1)))\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:15 =#</span>)), (ts = (&quot;Bounded [block, wrapper]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:76 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:76 =#</span> @test_nowarn Bounded(Image{2}(), (16, 16))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:77 =#</span>\n    bounded = Bounded(Image{2}(), (16, 16))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:78 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:78 =#</span> @test checkblock(bounded, rand(16, 16))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:81 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:81 =#</span> @test Bounded(bounded, (16, 16)) == bounded\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/bounded.jl:75 =#</span>)), (ts = (&quot;Keypoints [block]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:41 =#</span>\n    block = Keypoints{2}((10, 10))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:42 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:42 =#</span> @test checkblock(block, rand(SVector{2}, 10, 10))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:44 =#</span>\n    block = Keypoints{2}((10, :))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:45 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:45 =#</span> @test checkblock(block, rand(SVector{2}, 10, 10))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:47 =#</span>\n    ks = map((k-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:47 =#</span>\n                    if rand() &gt; 0.5\n                        k\n                    else\n                        nothing\n                    end\n                end), rand(SVector{2}, 10, 10))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:48 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:48 =#</span> @test checkblock(block, ks)\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/blocks/keypoints.jl:40 =#</span>)), (ts = (&quot;ImagePreprocessing [encoding]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:186 =#</span>\n    encfns = [(()-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:187 =#</span>\n                    ImagePreprocessing()\n                end), (()-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:188 =#</span>\n                    ImagePreprocessing(buffered = false)\n                end), (()-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:189 =#</span>\n                    ImagePreprocessing(T = Float64)\n                end), (()-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:190 =#</span>\n                    ImagePreprocessing(augmentations = augs_lighting())\n                end), (()-&gt;begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:191 =#</span>\n                    ImagePreprocessing(C = Gray{N0f8}, means = SVector(0.0), stds = SVector(1.0))\n                end)]\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:193 =#</span>\n    for encfn = encfns\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:194 =#</span>\n        enc = encfn()\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:195 =#</span>\n        block = Image{2}()\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:196 =#</span>\n        img = rand(RGB{N0f8}, 10, 10)\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:197 =#</span>\n        testencoding(enc, block, img)\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:199 =#</span>\n        ctx = Validation()\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:200 =#</span>\n        outblock = encodedblock(enc, block)\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:201 =#</span>\n        a = encode(enc, ctx, block, img)\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:202 =#</span>\n        rimg = decode(enc, ctx, outblock, a)\n        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:203 =#</span>\n        if eltype(rimg) &lt;: RGB\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:204 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:204 =#</span> @test img ≈ rimg\n        end\n    end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:208 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:208 =#</span> @testset &quot;3D&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:209 =#</span>\n            enc = ImagePreprocessing()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:210 =#</span>\n            block = Image{3}()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:211 =#</span>\n            img = rand(RGB{N0f8}, 10, 10, 10)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:212 =#</span>\n            FastAI.testencoding(enc, block, img)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:214 =#</span>\n            enc = ImagePreprocessing(buffered = false)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:215 =#</span>\n            block = Image{3}()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:216 =#</span>\n            img = rand(RGB{N0f8}, 10, 10, 10)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:217 =#</span>\n            FastAI.testencoding(enc, block, img)\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:220 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:220 =#</span> @testset &quot;imagedatasetstats&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:222 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:222 =#</span> @testset &quot;RGB&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:223 =#</span>\n                    data = [zeros(RGB{Float32}, 10, 10), ones(RGB{Float32}, 10, 10)]\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:224 =#</span>\n                    (means, stds) = imagedatasetstats(data, RGB{N0f8}; progress = false)\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:225 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:225 =#</span> @test means ≈ [0.5, 0.5, 0.5]\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:226 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:226 =#</span> @test stds ≈ [0.0, 0.0, 0.0]\n                end\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:229 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:229 =#</span> @testset &quot;Gray&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:230 =#</span>\n                    data = [zeros(Gray{Float32}, 10, 10), ones(Gray{Float32}, 10, 10)]\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:231 =#</span>\n                    (means, stds) = imagedatasetstats(data, Gray{N0f8}; progress = false)\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:232 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:232 =#</span> @test means ≈ [0.5]\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:233 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:233 =#</span> @test stds ≈ [0.0]\n                end\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:238 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:238 =#</span> @testset &quot;setup&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:239 =#</span>\n            data = [zeros(10, 10), ones(10, 10)]\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:243 =#</span>\n            enc = setup(ImagePreprocessing, Image{2}(), data, C = Gray{N0f8})\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:244 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:244 =#</span> @test enc.stats[1] ≈ [0.5]\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:245 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:245 =#</span> @test enc.stats[2] ≈ [0.0]\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/imagepreprocessing.jl:185 =#</span>)), (ts = (&quot;KeypointPreprocessing [encoding]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:57 =#</span>\n    ks = [SVector{2, Float32}(10, 10), SVector{2, Float32}(50, 80)]\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:61 =#</span>\n    sz = (100, 100)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:63 =#</span>\n    block = Keypoints{2}(2)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:64 =#</span>\n    enc = KeypointPreprocessing(sz)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:65 =#</span>\n    ctx = Training()\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:67 =#</span>\n    testencoding(enc, block, ks)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:68 =#</span>\n    y = encode(enc, ctx, block, ks)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:69 =#</span>\n    ks_ = decode(enc, ctx, encodedblock(enc, block), y)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:70 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:70 =#</span> @test ks ≈ ks_\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/keypointpreprocessing.jl:55 =#</span>)), (ts = (&quot;ProjectiveTransforms [encoding]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:226 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:226 =#</span> @testset &quot;image&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:227 =#</span>\n            encoding = ProjectiveTransforms((32, 32))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:228 =#</span>\n            image = rand(RGB, 64, 96)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:229 =#</span>\n            block = FastAI.Image{2}()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:232 =#</span>\n            imagetrain = encode(encoding, Training(), block, image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:233 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:233 =#</span> @test size(imagetrain) == (32, 32)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:235 =#</span>\n            imagevalid = encode(encoding, Validation(), block, image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:236 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:236 =#</span> @test size(imagevalid) == (32, 32)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:238 =#</span>\n            imageinference = encode(encoding, Inference(), block, image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:239 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:239 =#</span> @test size(imageinference) == (32, 48)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:242 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:242 =#</span> @test size(image, 1) / size(image, 2) == size(imageinference, 1) / size(imageinference, 2)\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:246 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:246 =#</span> @testset &quot;keypoints&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:247 =#</span>\n            encoding = ProjectiveTransforms((32, 48))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:248 =#</span>\n            ks = [SVector(0.0, 0), SVector(64, 96)]\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:249 =#</span>\n            block = FastAI.Keypoints{2}(10)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:250 =#</span>\n            bounds = DataAugmentation.Bounds((1:32, 1:48))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:251 =#</span>\n            r = DataAugmentation.getrandstate(encoding.tfms.training)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:252 =#</span>\n            kstrain = encode(encoding, Training(), block, ks; state = (bounds, r))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:253 =#</span>\n            ksvalid = encode(encoding, Validation(), block, ks; state = (bounds, r))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:254 =#</span>\n            ksinference = encode(encoding, Inference(), block, ks; state = (bounds, r))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:256 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:256 =#</span> @test kstrain == ksvalid == ksinference\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:259 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:259 =#</span> @testset &quot;image and keypoints&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:260 =#</span>\n            encoding = ProjectiveTransforms((32, 32))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:261 =#</span>\n            image = rand(RGB, 64, 96)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:262 =#</span>\n            ks = [SVector(0.0, 0), SVector(64, 96)]\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:263 =#</span>\n            blocks = (FastAI.Image{2}(), FastAI.Keypoints{2}(10))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:265 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:265 =#</span> @test_nowarn encode(encoding, Training(), blocks, (image, ks))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:266 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:266 =#</span> @test_nowarn encode(encoding, Validation(), blocks, (image, ks))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:267 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:267 =#</span> @test_nowarn encode(encoding, Inference(), blocks, (image, ks))\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:271 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:271 =#</span> @testset &quot;custom tests&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:272 =#</span>\n            enc = ProjectiveTransforms((32, 32), buffered = false)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:273 =#</span>\n            block = Image{2}()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:274 =#</span>\n            image = rand(RGB, 100, 50)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:276 =#</span>\n            testencoding(enc, block, image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:277 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:277 =#</span> @testset &quot;randstate is shared&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:278 =#</span>\n                    (im1, im2) = encode(enc, Training(), (block, block), (image, image))\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:279 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:279 =#</span> @test im1 ≈ im2\n                end\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:282 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:282 =#</span> @testset &quot;don&#39;t transform data that doesn&#39;t need to be resized&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:283 =#</span>\n                    imagesmall = rand(RGB, 32, 32)\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:284 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:284 =#</span> @test imagesmall ≈ encode(enc, Validation(), block, imagesmall)\n                end\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:287 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:287 =#</span> @testset &quot;3D&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:289 =#</span>\n                    testencoding(ProjectiveTransforms((16, 16, 16)), Image{3}(), rand(RGB{N0f8}, 32, 24, 24))\n                end\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/encodings/projective.jl:225 =#</span>)), (ts = (&quot;blockbackbone&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/models.jl:66 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/models.jl:66 =#</span> @test_nowarn FastAI.blockbackbone(Vision.ImageTensor{2}(3))\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/models.jl:65 =#</span>)), (ts = (&quot;ImageClassificationSingle [task]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:127 =#</span>\n    task = ImageClassificationSingle((16, 16), [1, 2])\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:128 =#</span>\n    testencoding(getencodings(task), (getblocks(task)).sample)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:129 =#</span>\n    FastAI.checktask_core(task)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:130 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:130 =#</span> @test_nowarn tasklossfn(task)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:131 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:131 =#</span> @test_nowarn taskmodel(task, Models.xresnet18())\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:133 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:133 =#</span> @testset &quot;`encodeinput`&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:134 =#</span>\n            image = rand(RGB, 32, 48)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:136 =#</span>\n            xtrain = encodeinput(task, Training(), image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:137 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:137 =#</span> @test size(xtrain) == (16, 16, 3)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:138 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:138 =#</span> @test eltype(xtrain) == Float32\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:140 =#</span>\n            xinference = encodeinput(task, Inference(), image)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:141 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:141 =#</span> @test size(xinference) == (16, 24, 3)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:142 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:142 =#</span> @test eltype(xinference) == Float32\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:144 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:144 =#</span> @testset &quot;`encodetarget`&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:145 =#</span>\n            category = 1\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:146 =#</span>\n            y = encodetarget(task, Training(), category)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:147 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:147 =#</span> @test y ≈ [1, 0]\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:152 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:152 =#</span> @testset &quot;Show backends&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:153 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:153 =#</span> @testset &quot;ShowText&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:155 =#</span>\n                end\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:158 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:158 =#</span> @testset &quot;blockmodel&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:159 =#</span>\n            task = ImageClassificationSingle((Image{2}(), Label(1:2)))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:160 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:160 =#</span> @test_nowarn taskmodel(task)\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:126 =#</span>)), (ts = (&quot;ImageClassificationMulti [task]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:166 =#</span>\n    task = ImageClassificationMulti((16, 16), [1, 2])\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:168 =#</span>\n    testencoding(getencodings(task), (getblocks(task)).sample)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:169 =#</span>\n    FastAI.checktask_core(task)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:170 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:170 =#</span> @test_nowarn tasklossfn(task)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:171 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:171 =#</span> @test_nowarn taskmodel(task, Models.xresnet18())\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:172 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:172 =#</span> @testset &quot;Show backends&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:173 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:173 =#</span> @testset &quot;ShowText&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:174 =#</span>\n                    FastAI.test_task_show(task, ShowText(Base.DevNull()))\n                end\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/classification.jl:164 =#</span>)), (ts = (&quot;ImageSegmentation [task]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:64 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:64 =#</span> @testset &quot;2D&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:65 =#</span>\n            task = ImageSegmentation((16, 16), 1:4)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:66 =#</span>\n            testencoding(getencodings(task), (getblocks(task)).sample)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:67 =#</span>\n            FastAI.checktask_core(task)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:68 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:68 =#</span> @test_nowarn tasklossfn(task)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:69 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:69 =#</span> @test_nowarn taskmodel(task, Models.xresnet18())\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:70 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:70 =#</span> @testset &quot;Show backends&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:71 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:71 =#</span> @testset &quot;ShowText&quot; begin\n                            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:72 =#</span>\n                            FastAI.test_task_show(task, ShowText(Base.DevNull()))\n                        end\n                end\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:76 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:76 =#</span> @testset &quot;3D&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:77 =#</span>\n            task = SupervisedTask((Image{3}(), Mask{3}(1:4)), (ProjectiveTransforms((16, 16, 16), inferencefactor = 8), ImagePreprocessing(), FastAI.OneHot()))\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:85 =#</span>\n            testencoding(getencodings(task), (getblocks(task)).sample)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:86 =#</span>\n            FastAI.checktask_core(task)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:87 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:87 =#</span> @test_nowarn tasklossfn(task)\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/segmentation.jl:63 =#</span>)), (ts = (&quot;ImageKeypointRegression [task]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:51 =#</span>\n    task = ImageKeypointRegression((16, 16), 10)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:52 =#</span>\n    FastAI.checktask_core(task)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:53 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:53 =#</span> @testset &quot;Show backends&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:54 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:54 =#</span> @testset &quot;ShowText&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:55 =#</span>\n                    FastAI.test_task_show(task, ShowText(Base.DevNull()))\n                end\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tasks/keypointregression.jl:50 =#</span>)), (ts = (&quot;ImageFolders [recipe]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:160 =#</span>\n    path = joinpath(datasetpath(&quot;mnist_var_size_tiny&quot;), &quot;train&quot;)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:162 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:162 =#</span> @testset &quot;Basic configuration&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:163 =#</span>\n            recipe = Vision.ImageFolders()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:164 =#</span>\n            (data, blocks) = loadrecipe(recipe, path)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:165 =#</span>\n            Datasets.testrecipe(recipe, data, blocks)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:166 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:166 =#</span> @test blocks[1] isa Image\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:167 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:167 =#</span> @test (blocks[2]).classes == [&quot;3&quot;, &quot;7&quot;]\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:170 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:170 =#</span> @testset &quot;Split configuration&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:171 =#</span>\n            recipe = Vision.ImageFolders(split = true)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:172 =#</span>\n            (data, blocks) = loadrecipe(recipe, path)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:173 =#</span>\n            Datasets.testrecipe(recipe, data[&quot;train&quot;], blocks)\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:176 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:176 =#</span> @testset &quot;Error cases&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:177 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:177 =#</span> @testset &quot;Empty directory&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:178 =#</span>\n                    recipe = Vision.ImageFolders(split = true)\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:179 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:179 =#</span> @test_throws ErrorException loadrecipe(recipe, mktempdir())\n                end\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:182 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:182 =#</span> @testset &quot;Only one label&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:183 =#</span>\n                    recipe = Vision.ImageFolders(labelfn = (x-&gt;begin\n                                        <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:183 =#</span>\n                                        &quot;1&quot;\n                                    end))\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:184 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:184 =#</span> @test_throws ErrorException loadrecipe(recipe, path)\n                end\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:159 =#</span>)), (ts = (&quot;ImageSegmentationFolders [recipe]&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:192 =#</span>\n    path = datasetpath(&quot;camvid_tiny&quot;)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:194 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:194 =#</span> @testset &quot;Basic configuration&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:195 =#</span>\n            recipe = ImageSegmentationFolders()\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:196 =#</span>\n            (data, blocks) = loadrecipe(recipe, path)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:197 =#</span>\n            Datasets.testrecipe(recipe, data, blocks)\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:198 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:198 =#</span> @test blocks[1] isa Image\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:199 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:199 =#</span> @test blocks[2] isa Mask\n        end\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:202 =#</span>\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:202 =#</span> @testset &quot;Error cases&quot; begin\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:203 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:203 =#</span> @testset &quot;Empty directory&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:204 =#</span>\n                    recipe = ImageSegmentationFolders()\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:205 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:205 =#</span> @test_throws ErrorException loadrecipe(recipe, mktempdir())\n                end\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:208 =#</span>\n            <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:208 =#</span> @testset &quot;Only one label&quot; begin\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:209 =#</span>\n                    recipe = ImageSegmentationFolders(labelfile = &quot;idontexist&quot;)\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:210 =#</span>\n                    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:210 =#</span> @test_throws ErrorException loadrecipe(recipe, path)\n                end\n        end\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/recipes.jl:191 =#</span>)), (ts = (&quot;Composition&quot;, quote\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tests.jl:3 =#</span>\n    encodings = (ProjectiveTransforms((5, 5)), ImagePreprocessing(), OneHot())\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tests.jl:4 =#</span>\n    blocks = (Image{2}(), Label(1:10))\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tests.jl:5 =#</span>\n    obs = (rand(RGB{N0f8}, 10, 10), 7)\n    <span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tests.jl:6 =#</span>\n    testencoding(encodings, blocks, obs)\nend), source = :(<span class=\"sgr90\">#= /home/runner/.julia/packages/FastAI/E6lvM/src/Vision/tests.jl:2 =#</span>))], map = Dict{Union{Expr, String}, Int64}())"},"type":"leaf"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}
{"attributes":{"kind":"function","backlinks":[{"tag":"sourcefile","title":"Flux/src/losses/functions.jl","docid":"sourcefiles/Flux/src/losses/functions.jl"},{"tag":"document","title":"Custom learning tasks","docid":"documents/docs/learning_methods.md"},{"tag":"sourcefile","title":"FastAI/src/encodings/onehot.jl","docid":"sourcefiles/FastAI/src/encodings/onehot.jl"},{"tag":"sourcefile","title":"FastAI/src/Vision/encodings/onehot.jl","docid":"sourcefiles/FastAI/src/Vision/encodings/onehot.jl"},{"tag":"sourcefile","title":"Flux/src/losses/Losses.jl","docid":"sourcefiles/Flux/src/losses/Losses.jl"},{"tag":"document","title":"Siamese image similarity","docid":"documents/notebooks/siamese.ipynb"}],"methods":[{"line":253,"file":"/home/runner/.julia/packages/Flux/7nTyc/src/losses/functions.jl","method_id":"Flux.Losses.logitcrossentropy_1","symbol_id":"Flux.Losses.logitcrossentropy","signature":"logitcrossentropy(ŷ, y; dims, agg)"}],"name":"logitcrossentropy","title":"logitcrossentropy","symbol_id":"Flux.Losses.logitcrossentropy","public":true,"module_id":"Flux.Losses"},"tag":"documentation","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["logitcrossentropy(ŷ, y; dims = 1, agg = mean)\n"],"type":"node"},{"attributes":{},"tag":"p","children":["Return the cross entropy calculated by"],"type":"node"},{"attributes":{"lang":""},"tag":"codeblock","children":["agg(-sum(y .* logsoftmax(ŷ; dims); dims))\n"],"type":"node"},{"attributes":{},"tag":"p","children":["This is mathematically equivalent to ",{"attributes":{},"tag":"code","children":["crossentropy(softmax(ŷ), y)"],"type":"node"},",",{"attributes":{},"tag":"br","children":[],"type":"node"},"but is more numerically stable than using functions ",{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["crossentropy"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"br","children":[],"type":"node"},"and ",{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["softmax"],"type":"node"}],"type":"node"}," separately."],"type":"node"},{"attributes":{},"tag":"p","children":["See also: ",{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["binarycrossentropy"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["logitbinarycrossentropy"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"document","href":"@ref","title":"","document_id":"references/@ref"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["label_smoothing"],"type":"node"}],"type":"node"},"."],"type":"node"},{"attributes":{},"tag":"h1","children":["Example"],"type":"node"},{"attributes":{"lang":"jldoctest"},"tag":"codeblock","children":["julia> y_label = Flux.onehotbatch(collect(\"abcabaa\"), 'a':'c')\n3×7 OneHotMatrix(::Vector{UInt32}) with eltype Bool:\n 1  ⋅  ⋅  1  ⋅  1  1\n ⋅  1  ⋅  ⋅  1  ⋅  ⋅\n ⋅  ⋅  1  ⋅  ⋅  ⋅  ⋅\n\njulia> y_model = reshape(vcat(-9:0, 0:9, 7.5f0), 3, 7)\n3×7 Matrix{Float32}:\n -9.0  -6.0  -3.0  0.0  2.0  5.0  8.0\n -8.0  -5.0  -2.0  0.0  3.0  6.0  9.0\n -7.0  -4.0  -1.0  1.0  4.0  7.0  7.5\n\njulia> Flux.logitcrossentropy(y_model, y_label)\n1.5791205f0\n\njulia> Flux.crossentropy(softmax(y_model), y_label)\n1.5791197f0\n"],"type":"node"}],"type":"node"}],"type":"node"}
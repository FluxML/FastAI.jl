{"attributes":{"kind":"abstract type","backlinks":[{"tag":"documentation","title":"BlockTask","docid":"FastAI@pr-274/ref/FastAI.BlockTask"},{"tag":"sourcefile","title":"FastAI/interpretation/learner.jl","docid":"FastAI@pr-274/src/interpretation/learner.jl"},{"tag":"sourcefile","title":"FastAI/interpretation/task.jl","docid":"FastAI@pr-274/src/interpretation/task.jl"},{"tag":"documentation","title":"SupervisedTask","docid":"FastAI@pr-274/ref/FastAI.SupervisedTask"},{"tag":"sourcefile","title":"FastAI/datablock/task.jl","docid":"FastAI@pr-274/src/datablock/task.jl"},{"tag":"document","title":"Variational autoencoders","docid":"FastAI@pr-274/doc/docs/notebooks/vae.ipynb"},{"tag":"documentation","title":"LearningTask","docid":"FastAI@pr-274/ref/FastAI.LearningTask"}],"methods":[],"package_id":"FastAI@pr-274","title":"AbstractBlockTask","symbol_id":"FastAI.AbstractBlockTask","exported":false,"module_id":"FastAI"},"tag":"documentation","children":[{"attributes":{"symbol":"FastAI.AbstractBlockTask","line":2,"module":"FastAI","file":"datablock/task.jl"},"tag":"docstring","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["abstract type AbstractBlockTask <: LearningTask\n"],"type":"node"},{"attributes":{},"tag":"p","children":["Abstract supertype for learning tasks that derive their functionality from ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.Block"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["Block"],"type":"node"}],"type":"node"},"s and ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.Encoding"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["Encoding"],"type":"node"}],"type":"node"},"s."],"type":"node"},{"attributes":{},"tag":"p","children":["These learning tasks require you only to specify blocks and encodings by defining which blocks of data show up at which stage of the pipeline. Generally, a subtype will have a field ",{"attributes":{},"tag":"code","children":["blocks"],"type":"node"}," of type ",{"attributes":{},"tag":"code","children":["NamedTuple"],"type":"node"}," that contains this information and a field ",{"attributes":{},"tag":"code","children":["encodings"],"type":"node"}," of encodings that are applied to samples. They can be accessed with ",{"attributes":{},"tag":"code","children":["getblocks"],"type":"node"}," and ",{"attributes":{},"tag":"code","children":["getencodings"],"type":"node"}," respectively. For example, ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.SupervisedTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["SupervisedTask"],"type":"node"}],"type":"node"}," represents a learning task where each sample consists of an input and a target."],"type":"node"},{"attributes":{},"tag":"codecell","children":[{"attributes":{"cell":"main","lang":"julia"},"tag":"codeinput","children":[{"attributes":{"cell":"main","lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"using","children":[{"attributes":{},"tag":"using","children":["using"],"type":"node"},{"attributes":{},"tag":".","children":[{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI"},"tag":"reference","children":["FastAI"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":".","children":[{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["FastVision"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"Identifier","children":["task"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI.SupervisedTask"},"tag":"reference","children":["SupervisedTask"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"tuple","children":[{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"curly","children":[{"attributes":{"reftype":"symbol","document_id":"DataAugmentation@0.2.10/ref/DataAugmentation.Image"},"tag":"reference","children":["Image"],"type":"node"},{"attributes":{},"tag":"{","children":["{"],"type":"node"},{"attributes":{},"tag":"Integer","children":["2"],"type":"node"},{"attributes":{},"tag":"}","children":["}"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI.Label"},"tag":"reference","children":["Label"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"vect","children":[{"attributes":{},"tag":"[","children":["["],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"","children":["\""],"type":"node"},{"attributes":{},"tag":"String","children":["cat"],"type":"node"},{"attributes":{},"tag":"\"","children":["\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"","children":["\""],"type":"node"},{"attributes":{},"tag":"String","children":["dog"],"type":"node"},{"attributes":{},"tag":"\"","children":["\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"]","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"tuple","children":[{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastVision@0.1.0/ref/FastVision.ImagePreprocessing"},"tag":"reference","children":["ImagePreprocessing"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI.OneHot"},"tag":"reference","children":["OneHot"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI"},"tag":"reference","children":["FastAI"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-274/ref/FastAI.getblocks"},"tag":"reference","children":["getblocks"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["task"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"coderesult","children":[{"attributes":{},"tag":"codeblock","children":[{"mimes":{"text/html":"(input = Image{2}(), target = Label{String}([&quot;cat&quot;, &quot;dog&quot;]), sample = (Image{2}(), Label{String}([&quot;cat&quot;, &quot;dog&quot;])), encodedsample = (FastVision.ImageTensor{2}(3), FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;])), x = FastVision.ImageTensor{2}(3), y = FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;]), ŷ = FastAI.OneHotTensor{0, String}([&quot;cat&quot;, &quot;dog&quot;]), pred = Label{String}([&quot;cat&quot;, &quot;dog&quot;]))"},"type":"leaf"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["To implement a new ",{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"}," either"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":["use the helper ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.BlockTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["BlockTask"],"type":"node"}],"type":"node"}," (simpler)"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":["or subtype ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.AbstractBlockTask"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"}],"type":"node"}," (allows customization through dispatch)"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"h2","children":["Blocks and interfaces"],"type":"node"},{"attributes":{},"tag":"p","children":["To support different learning task interfaces, a ",{"attributes":{},"tag":"code","children":["AbstractBlockTask"],"type":"node"},"'s blocks need to contain different blocks. Below we list first block names with descriptions, and afterwards relevant interface functions and which blocks are required to use them."],"type":"node"},{"attributes":{},"tag":"h3","children":["Blocks"],"type":"node"},{"attributes":{},"tag":"p","children":["Each name corresponds to a key of the named tuple ",{"attributes":{},"tag":"code","children":["blocks = getblocks(task)"],"type":"node"},"). A block is referred to with ",{"attributes":{},"tag":"code","children":["blocks.$name"],"type":"node"}," and an instance of data from a block is referred to as ",{"attributes":{},"tag":"code","children":["$name"],"type":"node"},"."],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.sample"],"type":"node"},": The most important block, representing one full observation of unprocessed data. Data containers used with a learning task should have compatible observations, i.e. ",{"attributes":{},"tag":"code","children":["checkblock(blocks.sample, data[i])"],"type":"node"},"."],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.x"],"type":"node"},": Data that will be fed into the model, i.e. (neglecting batching) ",{"attributes":{},"tag":"code","children":["model(x)"],"type":"node"}," should work"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.ŷ"],"type":"node"},": Data that is output by the model, i.e. (neglecting batching) ",{"attributes":{},"tag":"code","children":["checkblock(blocks.ŷ, model(x))"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.y"],"type":"node"},": Data that is compared to the model output using a loss function, i.e. ",{"attributes":{},"tag":"code","children":["lossfn(ŷ, y)"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["blocks.encodedsample"],"type":"node"},": An encoded version of ",{"attributes":{},"tag":"code","children":["blocks.sample"],"type":"node"},". Will usually correspond to ",{"attributes":{},"tag":"code","children":["encodedblockfilled(getencodings(task), blocks.sample)"],"type":"node"},"."],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"h3","children":["Interfaces/functionality and required blocks:"],"type":"node"},{"attributes":{},"tag":"p","children":["Core:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.encode"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["encode"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, sample)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"},". Also enables use of ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.taskdataset"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskdataset"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.taskdataloaders"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskdataloaders"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.decode"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decode"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, encodedsample)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.decodeypred"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decodeypred"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, ŷ)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.decodey"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["decodey"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task, ctx, y)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["y"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Training:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.taskmodel"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["taskmodel"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["x"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.tasklossfn"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["tasklossfn"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["y"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Visualization:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsamples"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showencodedsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showencodedsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showencodedsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showencodedsamples"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showbatch"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showbatch"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showsample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsample"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showsamples"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showsamples"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showoutput"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutput"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showoutputs"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutputs"],"type":"node"}],"type":"node"},", ",{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.showoutputbatch"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["showoutputbatch"],"type":"node"}],"type":"node"}," require ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["encodedsample"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"p","children":["Testing:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.mockmodel"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["mockmodel"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["x"],"type":"node"},", ",{"attributes":{},"tag":"code","children":["ŷ"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{"reftype":"symbol","href":"#","title":"","document_id":"FastAI@pr-274/ref/FastAI.mocksample"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["mocksample"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(task)"],"type":"node"}," requires ",{"attributes":{},"tag":"code","children":["sample"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}
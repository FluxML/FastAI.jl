{"attributes":{"kind":"function","backlinks":[{"tag":"sourcefile","title":"Flux/Flux.jl","docid":"Flux@0.13.17/src/Flux.jl"},{"tag":"sourcefile","title":"Flux/functor.jl","docid":"Flux@0.13.17/src/functor.jl"},{"tag":"sourcefile","title":"Flux/layers/normalise.jl","docid":"Flux@0.13.17/src/layers/normalise.jl"},{"tag":"documentation","title":"Dropout","docid":"Flux@0.13.17/ref/Flux.Dropout"},{"tag":"documentation","title":"AlphaDropout","docid":"Flux@0.13.17/ref/Flux.AlphaDropout"},{"tag":"sourcefile","title":"Flux/deprecations.jl","docid":"Flux@0.13.17/src/deprecations.jl"},{"tag":"documentation","title":"trainmode!","docid":"Flux@0.13.17/ref/Flux.trainmode!"},{"tag":"documentation","title":"BatchNorm","docid":"Flux@0.13.17/ref/Flux.BatchNorm"}],"methods":[{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"layers/normalise.jl","line":86,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"layers/normalise.jl","line":151,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"layers/normalise.jl","line":354,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"layers/normalise.jl","line":446,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"layers/normalise.jl","line":553,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"functor.jl","line":36,"signature":"(::Signature)"},{"symbol_id":"Flux.testmode!","module_id":"Flux","file":"functor.jl","line":65,"signature":"(::Signature)"}],"package_id":"Flux@0.13.17","title":"testmode!","symbol_id":"Flux.testmode!","exported":true,"module_id":"Flux"},"tag":"documentation","children":[{"attributes":{"symbol":"Flux.testmode!","line":7,"module":"Flux","file":"functor.jl"},"tag":"docstring","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["testmode!(model, [mode]) -> model\n"],"type":"node"},{"attributes":{},"tag":"p","children":["Set a layer, or all layers in a model, to test mode. This disables the effect of ",{"attributes":{"reftype":"symbol","href":"@ref","title":"","document_id":"Flux@0.13.17/ref/Flux.Dropout"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["Dropout"],"type":"node"}],"type":"node"}," and some other regularisation layers."],"type":"node"},{"attributes":{},"tag":"p","children":["If you manually set a model into test mode, you need to manually place it back into train mode during training phase, using ",{"attributes":{"reftype":"symbol","href":"@ref","title":"","document_id":"Flux@0.13.17/ref/Flux.trainmode!"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["trainmode!"],"type":"node"}],"type":"node"},"."],"type":"node"},{"attributes":{},"tag":"p","children":["There is an optional second argument, which takes a symbol ",{"attributes":{},"tag":"code","children":[":auto"],"type":"node"}," to reset all layers back to the default automatic mode."],"type":"node"},{"attributes":{},"tag":"h1","children":["Example"],"type":"node"},{"attributes":{"lang":"jldoctest"},"tag":"codeblock","children":["julia> d = Dropout(0.3)\nDropout(0.3)\n\njulia> testmode!(d)   # dropout is now always disabled\nDropout(0.3, active=false)\n\njulia> trainmode!(d)  # dropout is now always enabled\nDropout(0.3, active=true)\n\njulia> testmode!(d, :auto)  # back to default\nDropout(0.3)\n"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{"symbol":"Flux.testmode!","line":48,"module":"Flux","file":"functor.jl"},"tag":"docstring","children":[{"attributes":{},"tag":"md","children":[{"attributes":{"lang":""},"tag":"codeblock","children":["testmode!(model, inactive)\n"],"type":"node"},{"attributes":{},"tag":"p","children":["This two-argument method is largely internal. It recurses into the ",{"attributes":{},"tag":"code","children":["model"],"type":"node"},", and until a method like ",{"attributes":{},"tag":"code","children":["testmode!(d::Dropout, inactive)"],"type":"node"}," alters the activity of a layer. Custom layers can support manual ",{"attributes":{},"tag":"code","children":["testmode!"],"type":"node"}," / ",{"attributes":{},"tag":"code","children":["trainmode!"],"type":"node"}," switching by defining such a method."],"type":"node"},{"attributes":{},"tag":"p","children":["Possible values of  ",{"attributes":{},"tag":"code","children":["inactive"],"type":"node"}," are:"],"type":"node"},{"attributes":{},"tag":"ul","children":[{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["true"],"type":"node"}," for testing, i.e. ",{"attributes":{},"tag":"code","children":["active=false"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":["false"],"type":"node"}," for training, same as ",{"attributes":{"reftype":"symbol","href":"@ref","title":"","document_id":"Flux@0.13.17/ref/Flux.trainmode!"},"tag":"reference","children":[{"attributes":{},"tag":"code","children":["trainmode!"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"code","children":["(m)"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"li","children":[{"attributes":{},"tag":"p","children":[{"attributes":{},"tag":"code","children":[":auto"],"type":"node"}," or ",{"attributes":{},"tag":"code","children":["nothing"],"type":"node"}," for Flux to detect training automatically."],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{"class":"compat"},"tag":"admonition","children":[{"attributes":{},"tag":"admonitiontitle","children":["Compat"],"type":"node"},{"attributes":{},"tag":"admonitionbody","children":[{"attributes":{},"tag":"p","children":["This method may be removed in a future breaking change, to separate the user-facing ",{"attributes":{},"tag":"code","children":["testmode!"],"type":"node"}," from the internal recursion."],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}
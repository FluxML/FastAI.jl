{"attributes":{"backlinks":[],"path":"/home/runner/work/FastAI.jl/FastAI.jl/src/datasets/recipe.jl","package_id":"FastAI@pr-267","title":"FastAI/datasets/recipe.jl","module_id":"FastAI"},"tag":"sourcefile","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"core_@doc","children":[""],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    abstract type DatasetRecipe\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["A recipe that contains configuration for loading a data container.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Calling it with a path returns a data container and the blocks\n"],"type":"node"},{"attributes":{},"tag":"String","children":["that each sample is made of.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["## Examples\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["For example implementations, see [`FastVision.ImageFolders`](#).\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["## Extending\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["### Interface\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["- [`loadrecipe`](#)`(::DatasetRecipe, args...; kwargs...) -> (data, blocks)`\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    This loads a data container the [`Block`]s that each observation corresponds to.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    For most recipes the only argument beside the recipe is a path to a folder on disk.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["- [`recipeblocks`](#)`(::Type{DatasetRecipe}) -> TBlocks`\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    The type of `blocks` returned by `loadrecipe`. Should be as specific as possible.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    Used for discovery.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["### Invariants\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Given\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```julia\n"],"type":"node"},{"attributes":{},"tag":"String","children":["data, blocks = loadrecipe(recipe, args...; kwargs...)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["the following must hold:\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["- `∀i ∈ 1:numobs(data): checkblock(blocks, data[i])`, i.e.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    `data` must be a data container of observations that are valid `blocks`.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["- `numobs(data) ≥ 1`, i.e. there is at least one observation if the data was loaded\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    without error.\n"],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"abstract","children":[{"attributes":{},"tag":"abstract","children":["abstract"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"type","children":["type"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.DatasetRecipe"},"tag":"reference","children":["DatasetRecipe"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"core_@doc","children":[""],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    loadrecipe(recipe, path)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Load a recipe from a path. Return a data container `data` and concrete\n"],"type":"node"},{"attributes":{},"tag":"String","children":["`blocks`.\n"],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"function","children":[{"attributes":{},"tag":"function","children":["function"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.loadrecipe"},"tag":"reference","children":["loadrecipe"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"core_@doc","children":[""],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    recipeblocks(TRecipe) -> TBlocks\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    recipeblocks(recipe) -> TBlocks\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Return the `Block` _types_ for the data container that recipe\n"],"type":"node"},{"attributes":{},"tag":"String","children":["type `TRecipe` creates. Does not return `Block` instances as the exact\n"],"type":"node"},{"attributes":{},"tag":"String","children":["configuration may not be known until the dataset is being\n"],"type":"node"},{"attributes":{},"tag":"String","children":["loaded.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["#### Examples\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```julia\n"],"type":"node"},{"attributes":{},"tag":"String","children":["recipeblocks(ImageFolders) == Tuple{Image{2}, Label}\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```\n"],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"where","children":[{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.recipeblocks"},"tag":"reference","children":["recipeblocks"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["R"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"where","children":["where"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"{","children":["{"],"type":"node"},{"attributes":{},"tag":"<:","children":[{"attributes":{},"tag":"Identifier","children":["R"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"<:","children":["<:"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.DatasetRecipe"},"tag":"reference","children":["DatasetRecipe"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"}","children":["}"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.recipeblocks"},"tag":"reference","children":["recipeblocks"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["R"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"function","children":[{"attributes":{},"tag":"function","children":["function"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.testrecipe"},"tag":"reference","children":["testrecipe"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["recipe"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"MLUtils@0.4.0/ref/MLUtils.Datasets"},"tag":"reference","children":["Datasets"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.DatasetRecipe"},"tag":"reference","children":["DatasetRecipe"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["path"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["AbstractPath"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"tuple","children":[{"attributes":{},"tag":"Identifier","children":["data"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["blocks"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.loadrecipe"},"tag":"reference","children":["loadrecipe"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["recipe"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["path"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"return","children":[{"attributes":{},"tag":"return","children":["return"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.testrecipe"},"tag":"reference","children":["testrecipe"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["recipe"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["data"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["blocks"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"function","children":[{"attributes":{},"tag":"function","children":["function"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.testrecipe"},"tag":"reference","children":["testrecipe"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["recipe"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"MLUtils@0.4.0/ref/MLUtils.Datasets"},"tag":"reference","children":["Datasets"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.DatasetRecipe"},"tag":"reference","children":["DatasetRecipe"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["data"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["blocks"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"Comment","children":["# `blocks` must be an instance of `recipeblocks(recipe)`"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"@","children":["@"],"type":"node"},{"attributes":{},"tag":"MacroName","children":["test"],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["blocks"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"isa","children":["isa"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":".","children":[{"attributes":{"reftype":"symbol","document_id":"MLUtils@0.4.0/ref/MLUtils.Datasets"},"tag":"reference","children":["Datasets"],"type":"node"},{"attributes":{},"tag":".","children":["."],"type":"node"},{"attributes":{},"tag":"quote","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.Datasets.recipeblocks"},"tag":"reference","children":["recipeblocks"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["recipe"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"Comment","children":["# Observations must be compatible with `blocks`"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n    "],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"@","children":["@"],"type":"node"},{"attributes":{},"tag":"MacroName","children":["test"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"FastAI@pr-267/ref/FastAI.checkblock"},"tag":"reference","children":["checkblock"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["blocks"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"MLUtils@0.4.0/ref/MLUtils.getobs"},"tag":"reference","children":["getobs"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["data"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Integer","children":["1"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}
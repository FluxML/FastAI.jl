{"attributes":{"backlinks":[],"path":"/home/runner/.julia/packages/Flux/4k0Ls/src/layers/stateless.jl","package_id":"Flux@0.13.6","title":"Flux/layers/stateless.jl","module_id":"Flux"},"tag":"sourcefile","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{"lang":"julia"},"tag":"codeblock","children":[{"attributes":{},"tag":"julia","children":[{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"core_@doc","children":[""],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    flatten(x::AbstractArray)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Reshape arbitrarly-shaped input into a matrix-shaped output,\n"],"type":"node"},{"attributes":{},"tag":"String","children":["preserving the size of the last dimension.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["See also [`unsqueeze`](@ref).\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["# Examples\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```jldoctest\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> rand(3,4,5) |> Flux.flatten |> size\n"],"type":"node"},{"attributes":{},"tag":"String","children":["(12, 5)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> xs = rand(Float32, 10,10,3,7);\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> m = Chain(Conv((3,3), 3 => 4, pad=1), Flux.flatten, Dense(400 => 33));\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> xs |> m[1] |> size\n"],"type":"node"},{"attributes":{},"tag":"String","children":["(10, 10, 4, 7)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> xs |> m |> size\n"],"type":"node"},{"attributes":{},"tag":"String","children":["(33, 7)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```\n"],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"function","children":[{"attributes":{},"tag":"function","children":["function"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"Flux@0.13.6/ref/Flux.flatten"},"tag":"reference","children":["flatten"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["AbstractArray"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n  "],"type":"node"},{"attributes":{},"tag":"return","children":[{"attributes":{},"tag":"return","children":["return"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["reshape"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":":","children":[":"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"ref","children":[{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["size"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"[","children":["["],"type":"node"},{"attributes":{},"tag":"Identifier","children":["end"],"type":"node"},{"attributes":{},"tag":"]","children":["]"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"core_@doc","children":[""],"type":"node"},{"attributes":{},"tag":"string","children":[{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["    normalise(x; dims=ndims(x), ϵ=1e-5)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Normalise `x` to mean 0 and standard deviation 1 across the dimension(s) given by `dims`.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["Per default, `dims` is the last dimension. \n"],"type":"node"},{"attributes":{},"tag":"String","children":["`ϵ` is a small additive factor added to the denominator for numerical stability.\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["# Examples\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```jldoctest\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> using Statistics\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> x = [9, 10, 20, 60];\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> y = Flux.normalise(x);\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> isapprox(std(y), 1, atol=0.2) && std(y) != std(x)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["true\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> x = rand(1:100, 10, 2);\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> y = Flux.normalise(x, dims=1);\n"],"type":"node"},{"attributes":{},"tag":"String","children":["\n"],"type":"node"},{"attributes":{},"tag":"String","children":["julia> isapprox(std(y, dims=1), ones(1, 2), atol=0.2) && std(y, dims=1) != std(x, dims=1)\n"],"type":"node"},{"attributes":{},"tag":"String","children":["true\n"],"type":"node"},{"attributes":{},"tag":"String","children":["```\n"],"type":"node"},{"attributes":{},"tag":"\"\"\"","children":["\"\"\""],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"@","children":["@"],"type":"node"},{"attributes":{},"tag":"MacroName","children":["inline"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"function","children":[{"attributes":{},"tag":"function","children":["function"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"Flux@0.13.6/ref/Flux.normalise"},"tag":"reference","children":["normalise"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"::","children":[{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":"::","children":["::"],"type":"node"},{"attributes":{},"tag":"Identifier","children":["AbstractArray"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"parameters","children":[{"attributes":{},"tag":";","children":[";"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["dims"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["ndims"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["ϵ"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{"reftype":"symbol","document_id":"Flux@0.13.6/ref/Flux.ofeltype"},"tag":"reference","children":["ofeltype"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Float","children":["1e-5"],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"block","children":[{"attributes":{},"tag":"NewlineWs","children":["\n  "],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"Identifier","children":["μ"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["mean"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["dims"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Identifier","children":["dims"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n  "],"type":"node"},{"attributes":{},"tag":"=","children":[{"attributes":{},"tag":"Identifier","children":["σ"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["std"],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["dims"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Identifier","children":["dims"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["mean"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"Identifier","children":["μ"],"type":"node"}],"type":"node"},{"attributes":{},"tag":",","children":[","],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"kw","children":[{"attributes":{},"tag":"Identifier","children":["corrected"],"type":"node"},{"attributes":{},"tag":"=","children":["="],"type":"node"},{"attributes":{},"tag":"false","children":["false"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n  "],"type":"node"},{"attributes":{},"tag":"return","children":[{"attributes":{},"tag":"return","children":["return"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"macrocall","children":[{"attributes":{},"tag":"@","children":["@"],"type":"node"},{"attributes":{},"tag":"@.","children":["."],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["x"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"-","children":["-"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["μ"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"/","children":["/"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"(","children":["("],"type":"node"},{"attributes":{},"tag":"call","children":[{"attributes":{},"tag":"Identifier","children":["σ"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"+","children":["+"],"type":"node"},{"attributes":{},"tag":"Whitespace","children":[" "],"type":"node"},{"attributes":{},"tag":"Identifier","children":["ϵ"],"type":"node"}],"type":"node"},{"attributes":{},"tag":")","children":[")"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"},{"attributes":{},"tag":"NewlineWs","children":["\n"],"type":"node"}],"type":"node"},{"attributes":{},"tag":"end","children":["end"],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}],"type":"node"}